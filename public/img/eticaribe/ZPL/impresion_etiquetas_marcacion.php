<div>
    <?php

    use MiApp\negocio\util\Validacion;

    $data_item = json_decode($_POST['datos']);
    $formulario = Validacion::Decodifica($_POST['formulario']);
    // resolucion de la impresora
    $resolucion = 200;
    if (isset($_POST['resolucion'])) {
        $resolucion = $_POST['resolucion'];
    }
    $check = $data_item->logo_etiqueta;
    $operario = "0" . ($formulario['id_persona']);

    $fecha_actual = date("d-m-Y");
    //sumo 1 año
    $fecha_ano = date("d-m-Y", strtotime($fecha_actual . "+ 1 year"));


    // extraer año,mes, dia de la fecha de compromiso
    $fechacompro = strtotime($data_item->fecha_compro_item);
    $ano_compro = date("y", $fechacompro);
    $dia_compro = date("d", $fechacompro);
    $mes_compro = date("m", $fechacompro);

    //parametros de orden de compra y de nombres
    $porciones_cod = explode("-", $data_item->codigo);
    $empresa = $data_item->nombre_empresa;
    $orden_compra = $data_item->orden_compra;

    if (strlen($empresa) >= 50) {
        $nombre1 = substr($empresa, 0, 53);
        $nombre2 = substr($empresa, 54, strlen($empresa));
    } else {
        $nombre1 = substr($empresa, 0, strlen($empresa));
        $nombre2 = "";
    }
    if (strlen($orden_compra) >= 27) {
        $orden1 = substr($orden_compra, 0, 30);
        $orden2 = substr($orden_compra, 30, strlen($orden_compra));
    } else {
        $orden1 = substr($orden_compra, 0, strlen($orden_compra));
        $orden2 = "";
    }


    if ($formulario['caja'] == '') { // se ejecutan las etiquetas 32 y 55x33
        if ($formulario['tamano'] == 1) { // La etiqueta es de 32
            $prueba =
                "<br>" .
                "^XA" .
                "^FT145,181^A0N,25,24^FH\^FD" . $operario . "^FS" . "<br>" .
                "^FT145,231^A0N,25,24^FH\^FD" . $formulario['cant_x'] . "^FS" . "<br>" .
                "^FT72,186^A0N,37,36^FH\^FDAux:^FS" . "<br>" .
                "^FT145,84^A0N,25,24^FH\^FD" . $fecha_ano . "^FS" . "<br>" .
                "^FT145,132^A0N,25,24^FH\^FD" . $formulario['lote'] . "^FS" . "<br>" .
                "^FT145,35^A0N,25,24^FH\^FD" . date('d/m/Y') . "^FS" . "<br>" .
                "^FT62,235^A0N,37,36^FH\^FDCant:^FS" . "<br>" .
                "^FT62,137^A0N,37,36^FH\^FDLote:^FS" . "<br>" .
                "^FT37,89^A0N,37,36^FH\^FDVence:^FS" . "<br>" .
                "^FT40,40^A0N,37,36^FH\^FDFecha:^FS" . "<br>" .
                "^BY126,126^FT275,182^BXN,7,200,0,0,1" .
                "^FH\^FD" . $data_item->codigo . "^FS" . "<br>" .
                "^FO37,243^GB375,0,4^FS" . "<br>" .
                "^FO37,195^GB234,0,4^FS" . "<br>" .
                "^FO37,145^GB234,0,5^FS" . "<br>" .
                "^FO37,95^GB234,0,5^FS" . "<br>" .
                "^FO37,49^GB234,0,5^FS" . "<br>" .
                "^FO270,1^GB0,244,4^FS" . "<br>" .
                "^FO137,1^GB0,244,4^FS" . "<br>" .
                "^FT81,281^A0N,37,36^FH\^FD" . $data_item->codigo . "^FS" . "<br>" .
                "^FT559,181^A0N,25,24^FH\^FD" . $operario . "^FS" . "<br>" .
                "^FT559,231^A0N,25,24^FH\^FD" . $formulario['cant_x'] . "^FS" . "<br>" .
                "^FT486,186^A0N,37,36^FH\^FDAux:^FS" . "<br>" .
                "^FT559,84^A0N,25,24^FH\^FD" . $fecha_ano . "^FS" . "<br>" .
                "^FT559,132^A0N,25,24^FH\^FD" . $formulario['lote'] . "^FS" . "<br>" .
                "^FT559,35^A0N,25,24^FH\^FD" . date('d/m/Y') . "^FS" . "<br>" .
                "^FT476,235^A0N,37,36^FH\^FDCant:^FS" . "<br>" .
                "^FT476,137^A0N,37,36^FH\^FDLote:^FS" . "<br>" .
                "^FT451,89^A0N,37,36^FH\^FDVence:^FS" . "<br>" .
                "^FT454,40^A0N,37,36^FH\^FDFecha:^FS" . "<br>" .
                "^BY126,126^FT689,182^BXN,7,200,0,0,1" .
                "^FH\^FD" . $data_item->codigo . "^FS" . "<br>" .
                "^FO451,243^GB375,0,4^FS" . "<br>" .
                "^FO451,195^GB234,0,4^FS" . "<br>" .
                "^FO451,145^GB234,0,5^FS" . "<br>" .
                "^FO451,95^GB234,0,5^FS" . "<br>" .
                "^FO451,49^GB234,0,5^FS" . "<br>" .
                "^FO684,1^GB0,244,4^FS" . "<br>" .
                "^FO551,1^GB0,244,4^FS" . "<br>" .
                "^FT495,281^A0N,37,36^FH\^FD" . $data_item->codigo . "^FS" . "<br>" .
                "^FT972,181^A0N,25,24^FH\^FD" . $operario . "^FS" . "<br>" .
                "^FT972,231^A0N,25,24^FH\^FD" . $formulario['cant_x'] . "^FS" . "<br>" .
                "^FT899,186^A0N,37,36^FH\^FDAux:^FS" . "<br>" .
                "^FT972,84^A0N,25,24^FH\^FD" . $fecha_ano . "^FS" . "<br>" .
                "^FT972,132^A0N,25,24^FH\^FD" . $formulario['lote'] . "^FS" . "<br>" .
                "^FT972,35^A0N,25,24^FH\^FD" . date('d/m/Y') . "^FS" . "<br>" .
                "^FT889,235^A0N,37,36^FH\^FDCant:^FS" . "<br>" .
                "^FT889,137^A0N,37,36^FH\^FDLote:^FS" . "<br>" .
                "^FT864,89^A0N,37,36^FH\^FDVence:^FS" . "<br>" .
                "^FT867,40^A0N,37,36^FH\^FDFecha:^FS" . "<br>" .
                "^BY126,126^FT1102,182^BXN,7,200,0,0,1" .
                "^FH\^FD" . $data_item->codigo . "^FS" . "<br>" .
                "^FO864,243^GB364,0,4^FS" . "<br>" .
                "^FO864,195^GB234,0,4^FS" . "<br>" .
                "^FO864,145^GB234,0,5^FS" . "<br>" .
                "^FO864,95^GB234,0,5^FS" . "<br>" .
                "^FO864,49^GB234,0,5^FS" . "<br>" .
                "^FO1097,1^GB0,244,4^FS" . "<br>" .
                "^FO964,1^GB0,244,4^FS" . "<br>" .
                "^FT908,281^A0N,37,36^FH\^FD" . $data_item->codigo . "^FS" . "<br>" .
                "^PQ" . $formulario['cantidad'] . ",0,1,Y^XZ" .
                "<br>";
        } else { // la etiqueta es de 55x33
            $prueba = "^XA" .
                "^LH0,0 " .
                "^PR4,4~SD15 " .
                "^MMT " .
                "^PW831 " .
                "^LL0264 " .
                "^LS0 " .
                "^BY144,144^FT216,162^BXN,7,200,0,0,1,~ " .
                "^FH\^FD" . $data_item->codigo . ";" . $formulario['cant_x'] . "^FS " .
                "^FT17,206^A0N,31,31^FH\^FDCant:^FS " .
                "^FT99,206^A0N,31,31^FH\^FD" .  $formulario['cant_x'] . "^FS " .
                "^FT217,206^A0N,31,31^FH\^FDAux:^FS " .
                "^FT289,207^A0N,31,31^FH\^FD" . $operario . "^FS " .
                "^FT17,164^A0N,31,31^FH\^FDLote:^FS " .
                "^FT91,164^A0N,31,31^FH\^FD" . $formulario['lote'] . "^FS " .
                "^FT17,122^A0N,31,31^FH\^FDO.P.:^FS " .
                "^FT91,122^A0N,31,31^FH\^FD" . $data_item->n_produccion . "^FS " .
                "^FT21,38^A0N,31,31^FH\^FDFecha:^FS " .
                "^FT21,80^A0N,31,31^FH\^FD" . date('d/m/Y') . "^FS " .
                "^FT81,249^A0N,28,28^FH\^FD" . $data_item->codigo . "^FS " .
                "^BY144,144^FT632,162^BXN,7,200,0,0,1,~ " .
                "^FH\^FD" . $data_item->codigo . ";" . $formulario['cant_x'] . "^FS " .
                "^FT433,206^A0N,31,31^FH\^FDCant:^FS " .
                "^FT515,206^A0N,31,31^FH\^FD" .  $formulario['cant_x'] . "^FS " .
                "^FT633,206^A0N,31,31^FH\^FDAux:^FS " .
                "^FT705,207^A0N,31,31^FH\^FD" . $operario . "^FS " .
                "^FT433,164^A0N,31,31^FH\^FDLote:^FS " .
                "^FT507,164^A0N,31,31^FH\^FD" . $formulario['lote'] . "^FS " .
                "^FT433,122^A0N,31,31^FH\^FDO.P.:^FS " .
                "^FT507,122^A0N,31,31^FH\^FD" . $data_item->n_produccion . "^FS " .
                "^FT437,38^A0N,31,31^FH\^FDFecha:^FS " .
                "^FT437,80^A0N,31,31^FH\^FD" . date('d/m/Y') . "^FS " .
                "^FT497,249^A0N,28,28^FH\^FD" . $data_item->codigo . "^FS " .
                "^PQ" . $formulario['cantidad'] . ",0,1,Y^XZ ";
        }
    } else { // se ejecuta la etiqueta de 100x50
        $porciones_cod = explode("-", $data_item->codigo);
        $empresa = $data_item->nombre_empresa;
        if (strlen($empresa) >= 57) {
            $nombre1 = substr($empresa, 0, 60);
            $nombre2 = substr($empresa, 61, strlen($empresa));
        } else {
            $nombre2 = substr($empresa, 0, strlen($empresa));
            $nombre1 = "";
        }
        if ($check != 1) {
            $prueba = "
            ^XA
            ^MMT
            ^PW831
            ^LL0400
            ^LS0
            ^BY144,144^FT633,310^BXN,9,200,0,0,1,~
            ^FH\^FD" . $data_item->codigo . "^FS
    
            ^FT37,186^ACN,36,20^FH\^FD" . $data_item->num_pedido . "^FS
            ^FT371,311^A0N,24,24^FH\^FDFecha:^FS
            ^FT451,313^ACN,18,10^FH\^FD" . date('d/m/Y') . "^FS
            ^FT267,224^A0N,24,26^FH\^FDCantidad total:^FS
            ^FT439,225^ACN,18,10^FH\^FD" . $formulario['caja'] . "^FS
            ^FT267,182^A0N,24,26^FH\^FDCantidad por rollo:^FS
            ^FT478,183^ACN,18,10^FH\^FD" .  $formulario['cant_x'] . "^FS
            ^FT37,267^A0N,24,26^FH\^FDCavidades:^FS
            ^FT163,268^ACN,18,10^FH\^FD" . $data_item->cav_cliente . "^FS
            ^FT267,267^A0N,24,24^FH\^FDLote:^FS
            ^FT331,268^ACN,18,10^FH\^FD" . $formulario['lote'] . "^FS
            ^FT197,311^A0N,24,24^FH\^FDAux:^FS
            ^FT245,313^ACN,18,10^FH\^FD" . $operario . "^FS
            ^FT37,311^A0N,24,24^FH\^FDCore:^FS
            ^FT99,313^ACN,18,10^FH\^FD" . $data_item->nombre_core . "^FS
            ^FT37,140^A0N,25,24^FH\^FD" . $nombre2 . "^FS
            ^FT37,108^A0N,25,24^FH\^FD" . $nombre1 . "^FS
            ^FT37,224^A0N,24,26^FH\^FDTama\A4o:^FS
            ^FT140,225^ACN,18,10^FH\^FD" . $porciones_cod[0] . "^FS
            ^FO26,325^GB575,0,1^FS
            ^FO26,279^GB575,0,1^FS
            ^FO26,237^GB576,0,1^FS
            ^FO27,193^GB575,0,2^FS
            ^FO26,149^GB776,0,1^FS
            ^FO344,280^GB0,45,1^FS
            ^FO155,280^GB0,45,1^FS
            ^FO240,150^GB0,129,2^FS
            ^FO600,150^GB0,175,1^FS
            ^PQ" . $formulario['cantidad'] . ",0,1,Y^XZ";
        } else {
            $imagen = '
        ~DG000.GRF,16896,088,
        ,:::::::::::::::::::gI0I8,,g02BFIFEA,Y01FNF0,Y0AFMFE8,X07FPFC0,W0BFIFJABFIFE,W03FIF50015FIF4,V0JFE800C002FIF80,
        U01FFD0I01D0I01FHF0,U03FHFA0H01E0I02FHFA,T017FF0J01F0J01FHF,T0BFF80J03F80J03FFE0,T07FF0K03F0K01FFC0,S01FFA0K0BFA0K03FF8,
        S07FC0L0HFE0L07FC,S0HFE0L0HFE0L0HFE,R01FF0L01FHFM01FF,R07FE0L03FBF0M03FA0hH0HAhS0B80,R07F40L01F3F0M03FC0hH0140hR05,
        Q03FE80L0FEAFC0M0HF80h03FF80hP0IF8,Q03F80M07C07C0M07FC0h07FFC0hP0IF8,Q03FA0M0FE0FE0M03FE0h07FFA0hP0IF8,
        Q0HFO0F407E0N07E0h07FFE0Q01540gT01FHFC,P03FC0M02F803E80M0HF80P0BFOF80V0IFE0O0BFJFE80gQ03FHFE0J0HF8,
        P01FC0M01F405E0N07F80P07FOF80V0JFP01FJFD0gR03FHFE0J05FC,P07F80M03F001F80M01FC0O03FPF80U02FHFE0N03FMFgR03FHFE0I03FF8,
        P0FC0N07E0H0FC0N0HFP07FPF80V0JFN01FNFD0gP03FHFE0I07FFC,P0FE80M07E0H0FC0N0HF80N0RF80U02FHFE0N0PF80gO03FHFE0I0IFC,
        O03F40N07C0H0FC0N03F0O0RF80L05D0M0IFE0M07FOFC0gO01FHFC0H01FHFC,O03F0N01F80H03F0N01FA0N0QFE80K03FF0M0IFE0L03FQFgP02FHFA0H03FHF8,
        O07F0N01780H03D0N017C0M01FQFM05FF0M07FFE0L01FQFgQ0IF80H01FHFC,O0FE0N03F80H03F80N0FE0M01FPFE80J02FHFN0IFA0L0SF80gO0IF80H03FHFC,
        N01F80N03F00401F80N07F0M01FPFC0K03FHFN01FD0L01FQFE0gP01FC0I03FHFC,N03FA0N03F00401F80N03F0M01FPFE0K03FHFO0HFM03FQFE0gP03FE0I03FHF8,
        N03F0O07C01501780N01F40L01FPF40K07FHFX03FQFgY03FHFC,N0HFP0FC01F007E0O0FE0L01FOFE80K0JFX0RFE80gW03FHFC,
        N07D0O0FC01F007E0O0FC0L01FPFM07FHFX0MFDFIFC0gX03FHFC,N0FC0N01F803F803E0O07E0L01FHFE0202020M0JFW03FJFA0H0IAh03FHF8,
        M01F80N01F003F801F0O01F0L01FHFC0R017FHFW07FIFC0hL03FHFC,M01F80N03E80BFA03F80N03E80K01FHFE0S0JFW07FIFE0hL03FHFC,
        M05F80N07E00FFC00FC0N01F80K01FHFC0R017FHFW07FIFX0H540gL03FHFC,
        M07FQFE00FFE00FPFEFC0K01FHFE0R03FIFJ2K03FE0I02FIFE0U03FIFA0N0280N0BFE0H03FHF803FFEA0R0BFFA8,
        M07F7FOFC01FFE007FQFC0K01FHFC0R017FHFO01FF0J0JFC0U017FHFC0Y03FE0H03FHFC017FD0S05FFD0,
        M0FE7FOFC01FHFH0QFEFE0K01FHFE0Q0PFC0I0HFE0I02FIF80U0LFC0L0BFC02FFA0H01FFE0H03FHFC0FJF80P0KFE80,
        M0FC3FOFH05FHF405FOF83D0K01FHFC0Q0PFC0H05FHFJ03FHFE0U07FKFE0K01FFC07FHFI07FFE0H03FHFC7FJFC0O07FKFC0,
        M0FC3FOFH03FHF803FOF83F0K01FHFE0Q0PFC0H03FFE0I03FHFE0U07FKFE80J02FFC0FIFI07FFE0H03FHF8FKFE0O0MFE0,
        M0F01F0gK01F01F0K01FHFC0P01FOFC0H07FHFJ07FHFC0T01FMF80J07FFC1FIFI07FFE0H03FPF80M03FMF0,
        L03F82FC0gJ0BF83F80J01FHFE0P03FOFC0H0IFE0I0JF80T03FMFE0J0IFCFJF802FHFE0H03FQFN0OFE,
        L01F00F40gJ03F01F0K01FHFC0P03FOFC0H07FHFJ07FHF80T07FMFC0I017FFC7FIFI0IFE0H03FPFD0L017FMFC,
        L03F00FE0gJ0BE01F80J01FHFE0P03FOF80H0IFE0I0JF80T0PFJ03FNFH02FHFE0H03FQF80K03FOF80,
        L03E007E0gJ0FC01780J01FHFC0P03FOFJ0JFI017FHFU01FOFJ01FMFD001FHFE0H03FQF80K03FOF80,
        L03E00FE80gI0FC00FA0J01FHFE0P03FOF80H0IFE0H01FIFU01FOF80H03FMFE002FHFE0H03FQFA0K0BFOFA0,
        L07E005E0gI01F8007C0J01FHFC0P07FNFE0I0JFI01FHFD0T01FF4007FIF80H01FMFC001FHFE0H03FQFE0K0QFE0,
        L07E003E80gI0F8007A0J01FHFE0P03FNFE0I0IFE0H01FHFE0T03FFA00BFIFA0H03FMF8002FHFE0H03FQFE0K0QFE0,
        L078001F80N017FD0O01F0H07E0J01FHFC0P03FNF80I0JFI01FHFC0T01F0I017FHFC0H01FLFE0H01FHFE0H03FRFK01FJFD7FJF0,
        L0FA0H0FC03FHFE002FIFE800FIF807E8003E0J01FPFE80H089FIFI8K0IFE0H03FHFC0U080J0JFE0H03FKFE80H02FHFE0H03FJFE8BFJF80I07FIF800FJF8,
        K01780H0FC01FHFC001FIFE0H07FHFH07E0H03E0J01FPFE0J017FHFN0JFI01FHFC0T0140J07FHFE0H01FKFD40H01FHFE0H03FJFC05FJF40I05FIFC007FIF0,
        K01F80H0FE01FHF800FKFE007FFE00FE0H03E0J01FPFE80J0JFN0IFE0H03FHFC0gG03FHFE0H03FJF80J03FHFE0H03FIFE0H03FIFC0I07FHFE0H03FIF8,
        K01F0I03D007FF801FLFH01FFE00FC0H01F0J01FPFE0J017FHFN0JFI03FHFC0gH0JFI01FIFC0K01FHFE0H03FIF80I0JFC0I07FHF40I07FHFC,
        K01F80H0BF00FHF80BFLF803FFE00FC0H03F0J01FPFE80J0JFN0IFE0H03FHFC0gG02FHFE0H03FIFE0K02FHFE0H03FIFA0H02FIFE0I0JFC0I0JFC,
        K01F0I01F007FE007FLFC01FF801F0J0F0J01FPFE0J017FHFN0JFI03FHFC0gH0JFI01FIF40K01FHFE0H03FIFK07FHFE0I0JFK07FHFC,
        K03F0I01F803FE01FMFE00FF803F0I02F80I01FPFE0K0JFN0IFE0H03FHF80gH0JFI03FIFM02FHFE0H03FIFK03FHFE0H02FHFE0J03FHFE,
        K01F0I01F003FE01FNFH0HFH03F0J0F0J01FPFE0J017FHFN0JFI03FHF80gH07FHFI01FHFD0L01FHFE0H03FHFD0J01FHFE0H01FHFE0J01FHFE,
        K03F0J0FA02FE03FNF80BF807E0J0F80I01FPFE0K0JFN0IFE0H0BFHF80W0BFEA8FIF8003FHFE0L02FHFE0H03FHFE0J01FHFE8003FHFE0J01FHFE80K03D
        0J07E00FC07FNFC03D007C0J0F40I01FPFC0J017FHFN0JFI03FHFC0V0KFC7FHFI01FHFC0L01FHFE0H03FHFC0K0JFI03FHF80J01FHFE,
        K03E0J07E00FC07FNFC03E00FA0J0F80I01FPFE0K0JFN0IFE0H03FHF80U02FJF8FIFI03FHFE0L03FHFE0H03FHFC0K0JF8003FHFA0K0IFE80K03D0J03F00
        7007FNFD01C01F80J07C0I01FPFL017FHFN0JFI03FHF80U07FKF7FHFI01FHFC0L01FHFE0H03FHFC0K0JF8003FHF80K0JF,
        K0BE0J03F80602FPF81803F80J0FC0I01FOFE0L0JFN0IFE0H0BFHF80T03FPF8003FHFC0L02FHFE0H03FHFC0K0JF8007FHF80H08ABFHFE80K03C0J01F0050
        0FPF01C01F0K07C0I01FOFE0K017FHFN0JFI03FHFC0T01FPFI01FHFC0L01FHFE0H03FHFC0K0JF8007FHFL05FIF,
        K03E0J02FC0202FPF80H03F0K0FC0I01FHFEAKA80L0JFN0IFE0H03FHF80T03FPFI03FHFC0L02FHFE0H03FHF80K0BFHF8007FHFIANF80K03C0K07C0H03
        FPFJ07C0K07C0I01FHFC0R017FHFN0JFI03FHFC0T0RFI01FHFC0L01FHFE0H03FHFC0K03FHF8007FSF,
        K0BC0K0FE0H03FPF80H0FE0K0FC0I01FHFE0S0JFN0IFE0H03FHFC0T0RF8003FHFC0L02FHFE0H03FHFC0K0BFHF8007FRFE80K07C0K07E0H03FPF80H0FC
        0K07C0I01FHFC0R017FHFN0JFI01FHFC0S01FQFI01FHFC0L01FHFE0H03FHFC0K03FHF8007FRFE,
        K0BC0K03E8003FPFA001F80K07E0I01FHFE0S0JFN0IFE0H03FHFE0S03FJFABFJFI03FHFC0L03FHFE0H03FHF80K03FHF8007FRFE, 
        K03C0K01F0H03FPF8001F80K07C0I01FHFC0R017FHFN0JFI01FHFC0S01FIFD17FJFI01FHFC0L01FHFE0H03FHFC0K03FHF8007FRFC,  
        K0BC0K01F8003FPFA003E80K0FE0I01FHFE0S0JFN0IFE0H03FIFT03FHFE800FJF8003FHFC0L02FHFE0H03FHFC0K0BFHF8007FRFC,
        K07C0L0FC007FPFC007E0L07C0I01FHFC0R017FHFN0JFI01FIFT07FHFC0H01FIFI01FHFC0L01FHFE0H03FHFC0K07FHF8007FRF0,
        K0BC0L0F8003FPFA007E0L07E0I01FHFE0S0JFN0IFE0H03FIFT07FHFE0H03FIFI03FHFC0L02FHFE0H03FHF80K0BFHF8007FQFE0,
        K07C0L0FC003FPF8005E0L07C0I01FHFC0R017FHFN0JFI017FHFT07FHF40I07FHFI01FHFC0L01FHFE0H03FHFC0K07FHF8007FQF,
        K0BC0K01F8003FPF8001F80K0FE0I01FHFE0S0JFN0IFE0I0JF80R0JF80I0JF8003FHFC0L02FHFE0H03FHFC0K0JF8007FOFE8,
        K07C0K01F8007FPF8001F80K07C0I01FHFC0R017FHFN0JFI017FHF80R07FHF40I07FHFI01FHFC0L01FHFE0H03FHFC0K0JF8007FOF40,
        K0BC0K03E8003FPFA0H0F80K07E0I01FHFE0S0JFN0IFE0I07FHFA0R0JFK0JFI03FHFC0L03FHFE0H03FHF80K0JF8003FKFHA20,
        K03C0K07E0H03FPF80H0FC0K07C0I01FHFC0R017FHFN0JFJ07FHFE0R07FHFK07FHFI01FHFC0L01FHFE0H03FHFC0J01FHFE0H03FIF,
        K0BC0K0FE0H03FPF80H0FC0K0FC0I01FHFE0S0JFN0IFE0I07FHFE0R0JF80I0JF8003FHFC0L02FHFE0H03FHFC0K0IFE8003FHFE88,
        K03C0K07C0H03FPFJ07D0K07C0I01FHFC0R017FHFN0JFJ03FIFS07FHFK07FHFI01FHFC0L01FHFE0H03FHFC0J01FHFE0H03FHFE,
        K03E0J02F80202FPFH0803F0K0FC0I01FHFE0S0JFN0IFE0I03FIFC0M02A00FIF80I0JFI03FHFC0L02FHFE0H03FHFE0J03FHFE0H03FHFE,
        K03C0K0F40H01FPFJ01F0K07C0I01FHFC0R017FHFN0JFJ03FIF40N04007FHFK07FHFI01FHFC0L01FHFE0H03FHFD0J01FHFC0H03FIF,
        K0BE0J03F80700FPF01C03F80J0FC0I01FHFE0S0JF80L0IFE0I02FIFE80L0FE00FIFC0I0JF8003FHFC0L02FHFE0H03FIF80I0JFE0H03FIF80,
        K03D0J07F007407FNFC01C01780J07C0I01FHFC0S07FHFN0JFK0KFC0K07FE007FHFC0H01FIFI01FHFC0L01FHFE0H03FIF80I0JFC0I0JFC0K01C0,
        K03E0J03E00F80FOFE03E00FA0J0FC0I01FHFE0S0JF80L0IFE0J0KF80J02FFE007FHFE0H03FIFI03FHFC0L03FHFE0H03FIFA0I0JFC0H02FIFC0K02A0,
        K03D0J07E00FC07FNF403F007E0J0F40I01FHFC0S07FHFJ03800FIFK07FJFK07FFC005FHFE0H07FIFI01FHFC0L01FHFE0H03FJFI03FIFK07FHFE0J017E0,
        K03F0J0FA02FE03FNF80FF803E0J0F80I01FOFE80K07FHFA00BF800FHFE0J03FKFIAJF8003FIFE8BFJF8003FHFC0L02FHFE0H03FJFE80FIFE0J0KFE800BFFE0,
        K01F0I017801FC01FNFH07F007E0J0F40I01FPFM07FHFC005F800FIFK05FKF405FIF8005FIFC05FJFI01FHFC0L01FHFE0H03FJFC007FIFK07FIFC0H05FFE0,
        K03F0I01F803FE00FMFE00FF803F0I02F0J01FPFE0K07FIFA3FF800FHFE0K0SFI01FQFI03FHFC0L02FHFE0H03FQFE0J07FKFBFIFE0,
        K01F0I01F007FF003FLF801FFC00F40H01F0J01FPFE0K03FLFE0H0JFL07FPFD0H01FQFI01FHFC0L01FHFE0H03FQF80J01FPFC0,
        K03F80H03F807FE80BFLFA01FFE02FC0H02F80I01FPFE80J03FLFE800FHFE0K0RFE0I0RF8003FHFC0L02FHFE0H03FQF80J01FPFE0,
        K01F0I03D007FF801FLFH05FFE00FC0H03F0J01FQFL03FLFC0H0IFE0K01FPF40I0RFI01FHFC0L01FHFE0H03FQFM0QF,
        K01F80H0FC01FHFC003FJF8007FHFH07E0H03E0J01FQF80J02FLF80H0IFE0L0PFE0J03FPFI03FHF80L03FHFE0H03FPFE0L0BFNFE,
        K01780H0FC01FHFC007FJFC007FHFH07C0H03F0J01FQFM0MFJ0IFE0L07FOFK03FPFI01FHFC0L01FHFC0H03FHF7FLFC0L03FNFD,
        L0FA0H0F803FHFE002FIFE800FIF807E8003E0J01FQF80K0LFE0I0IFE0L03FNFA0J03FLFEFHF8003FHF80L02FHFA0H03FFE7FLF80L03FNF8,
        L07C001F80O0H540O01F8007E0J01FQF80K05FJFK0IFC0M07FLFD0L07FKF0FHFI01FFE0M01FHF80H03FFC3FKFC0N07FLFC0,
        L07A001F80H020K0IAJ02020H01F8007E0J01FQF80K03FJF80I0IFA0M0NFE0L07FKF8FHFI03FFE80L02FHF80H03FFE3FKFE0N0NFE0,
        L07E005E0gI01F8007C0J01FQF80L0JFC0J0IFP07FKFN01FJFC07FF0H01FFC0M01FHFJ03FF00FKFP01FLF,
        L07E007E80gI0F800FA0J01FQF80L0JFE0J0IF80N0LFE80L02FJFE0FHF8003FFE0M02FHF80H03FF80FKF80N02FLF80,
        L07E007C0gJ0FC01780J01FQF80L01FFC0K0HFC0P07FIF40N05FHFC001FF0H01FF0N01FFC0I03FC005FIFR05FJF0,
        L03F00FE0gJ0BE01F80K0R2O0H2M0H2S02AA0Q02AA0I0H2J020P0H2K020J02AA80R02FFA80,
        L03F007C0gJ03D01F0iL0150gU01540S017F5,L02F82FC0gJ03F83F80,M0F43F5N5H0J54015K5H41F03F,L02F83FANAH02AHA800AMABF83F,
        M07C3FOFH01FHFH05FOF83D,M0FEFPFC01FHFH0QFEFC,M07C7FOFC01FHFH07FOFEFC,
        M07EBABABABFIFE00FFE00FRF80S0202A0gG020g020M020hI02808,
        M01F80N05E007FC00F40N01F80L01FIFH0E03E0gG0E0g040M050hI0381C,
        M01F80N07E80FFA02FC0N01F80L03FIF80E03E0gG0E0g0E0M0E0hI0B81C,
        M01FC0N01F003F803F0O05E0M01FIFH0E03C0gG0E0g040M050hI0781C,N0FE0O0F803F803E0O0FE0M03A020H0E0gJ0E0g0E0M0E0hI0203C,
        N0FC0N01F801F003E0O07E0M01C0J0E0gJ0E0g040M050hK01C,N0BF0O0FC01F80FE0O0FC0M03C0J0E0gJ0E0g0E0M0E0hK01C,
        N01F0O07D00401780N01F40M01C0J0E0gJ0E0g040M050hK01C,N03F80N0BE00E01FA0N03F80M0380I02E0K020W0E0I020R0200E0M0F0O020J020X020N03C02,
        N01F80N03F00401F0O07F0N01C0I05F40I05FC14040H040017F0H05F4001FC1401F0K01FF040017F0H050K07C01FC0H017F14041E0J07F0I017F05041E1
        01C1FC0I05FC,O0FE0N03F80H03F80N0FE0N03C0I0HFE2A02FHF9C0E0H0E80BFHF80FFE80FHF9C0FFE0J0IFHEH0IFE00E0I0EBFF8FHFI0IFCE0EFE0I0JF80
        0FHFHE0EFEB81CFHF8003FHF80,O07E0N01F0I03F0O07E0N01C0H017FE1800FHF1C0E0H0E007FHFH07FE01FHF5C0FFE0J0IFC4007FFD0050I067FF87FD0H
        0IFD40E7C0I07FHFI07FFC50E7E381C7DFC001FHF,O03F0N01FA0H0BE0N03FA0N0380I02E02A03A03FE0E0H0E00E80F800E003E03FC0E0E0I03E00FE01
        F02F80E0I0BF8BAE07803E02FE0FE0I01F803A03E80FE0FE0383FA03E007A03A0,O01F40N07C0H0FC0N03F0O01D5H5H0E018070H07C0E0H0E01
        C001E00E0070H07C1C0K078003C01C0038050I07C01F003C074003C0F0J01C0H0E078003D0F80381F00170170H0E0,
        O03FC0N0FE0H0FC0N0BF80N03EIE80E02A0F800FC0E0H0E81E003E00E00F800FC0E0K0FA00BE03C003A0E0I0FC03F803C0FC00BE0F80I03C002E07A00BE0
        F80B81F800F80F802E0,P0FE0N07E001FC0N0FD0O01FIFH0E01C1D0H05C0E0H0E0540H0E00E00F0H03C1C0K070H01C038001C050I07801F001C070H
        01C0E0J0380J070H01D0F00381C0H0781C0H070,P07F80M03F003F80M03F80O03EAHA02E02A1E0H03E0E0H0E070I0F00E02E0H03C0E0J01E0H01E0A80H0E0F0I0
        A801F003E0E0H01E0E0J0A80J0E0H01F0E80383E0H03A380H078,
        P07F0N03F001F0N01FC0O01C0J0E0181C0H01C0E0H0E070I0700E01C0H01C0E0J0150H014070I0E050I070015001C0E0H01C0E0J0
        70J0150H0150E00381C0H0381C0H070,
        P01FE0M02F807E80M0HF80O03C0J0E02A3C0H01C0E0H0E8FEIEF00E02A0H01C0F80I01C0I0E0FEJE0E0I0E800E002E0E0I0E0E0J0E80I01E0I0E0E80B81C0H
        02A3EIEF8,Q0HFO0FC07C0N0FC0P01C0J0E0181C0H01C0E0H0E07FJFH0E0180H01C01F0I01C0I040FJFE050I0600140H0C0E0H0140E0J0E0J01C0I050E0038
        1C0I0C3FJF4,Q0HF80M0FC0FE0M02FE0P0380J0E02A380I0E0E0H0E0FKFH0E02A0H01C03F80H01C0I0E0FJFE0E0I0A0H0E002E0E0I0E0E0J0E0J01E0I060E0
        0383C0H02A3FJF8,Q03FC0M07C07C0M07F40P01C0J0E0181C0H01C0E0H0E070L0E0180H01C00780H01C0I040E0K050I0600140H0C0E0H0140E0J0E0J01C0I0
        50E00381C0H018380,Q01FF80L07EAF80L01FE80P03C0J0E02A1C0H01C0E0H0E8F0L0E02A0H03C002E0H01E0I0E0E80J0E0I0E800E002E0E0H01E0E0J0E80I0
        1E0I0E0E80B81C0H03A380,Q017F0M05E0F40L01FF0Q01C0J0E01C1C0H01C0E0H0E070L0E01C0H01C0H0E0H01C0H0140E0K050I0600140H0C0E0H01C0E0J0E0J0
        1C0I050E00381C0H0181C0,R03FE0L03FBF0M0BFA0Q0380I02E02A1E0H03E0E0H0E070I0A00E02E0H03C0H0E0I0F0H01E0A80H0A0F0I0A001E002E0E0H03E0E0
        J0B80J0F0H01F0E00383E0H0383C0H020,S0HFM01FFE0L01FF0R01C0J0E018170H07C07001C0140H0E00E00F0H03C0H070I070H01C038001C050I0600140
        H0C070H03C0E0J0380J070H01D0E00381E0H0701C0H070,R02FF80L0HFE0L03FF80Q03C0J0E02A0F800FC0F0H0E03C002E00E00E0H0BC0H0E0I0F8003E0B
        8003E0E0I0E800E002E0F800BE0E0J0B80H0A0F800BE0E80B81E800F81E0H0F0,S05FD0L0HFC0L07FC0R01C0J0E01807800FC07405C01C003C00E00740
        1FC140E0I07C007C01C0078050I0600140H0C05C00FC0E0J01D001E07C007D0E00381F801F007001E0,T0HFA0K0BF80K03FE80R03FIFH0E02A03E8BBE
        03EAF800FA3F800E003E8FFC3E3E0I03F83EE01FABF00E0I0A0H0E002E01EA3EE0E0K0FA2FA02FA3EE0E00383FFABE003E2FA0,S01FF80K03F80K07FE0S
        01FIFH0E01803F079C01C07400F0170H0E001F055C1C3E0I01F01C401701F0050I0600140H0C01F01D40E0J017017001F01D50E00381DD07C003C1780,
        T0BFFE0J0BF80J0BFFC0S03FIF80E02A00FHF9C00FFE0H0BFFE800E0H0IF9C0FFA0J0IF8E00BFFC00E0I0E800E002E00BFF8E0E0K03FFE800F
        HF8E0E80B81CFHF8002FHF80,U07FFC0I01F0J05FFC0gN0501C00150J0540N050I0140L0540J0540Y050Q0540J0540P0540I0140,
        U0IF80I03F0J03FFE0U0J2H020J02A81E002AA0I02A80H020H02BA0H02A0L0BA0J0HAI020I020O02AA0H020L0BA80I0HA02020020H02BA0I02A8,
        V07FF0I0150I03FFD0gQ01C0,V0BFHFE880C00AFHFE80gQ01C0,V01FHFD0H04001FIFgS01C0,W03FJFHALF80gR01E0,X01FPFgU01C0,X02FPF80gS01C0,
        g07FLFC0gU0140,gG02ABFBA8,gH0H5F540,,::::::::::::::: 
        ';
            $prueba = '<br>' .
                '^XA' .
                $imagen .
                '^FT256,192^XG000.GRF,1,1^FS
            ^BY208,208^FT937,520^BXN,13,200,0,0,1
            ^FH\^FD' . $data_item->codigo . '^FS
            ^FT46,327^AAN,36,20^FH\^FD' . $data_item->num_pedido . '^FS
            ^FT622,521^AAN,36,20^FH\^FD' . date('d/m/Y') . '^FS
            ^FT519,526^A0N,35,36^FH\^FDFecha:^FS
            ^FT603,393^AAN,36,20^FH\^FD' . $formulario['caja'] . '^FS
            ^FT369,398^A0N,35,38^FH\^FDCantidad total:^FS
            ^FT662,327^AAN,36,20^FH\^FD' .  $formulario['cant_x'] . '^FS
            ^FT363,331^A0N,35,38^FH\^FDCantidad por rollo:^FS
            ^FT218,457^AAN,36,20^FH\^FD' . $data_item->cav_cliente . '^FS
            ^FT49,462^A0N,35,38^FH\^FDCavidades:^FS
            ^FT187,391^AAN,36,20^FH\^FD' . $porciones_cod[0] . '^FS
            ^FT322,521^AAN,36,20^FH\^FD' . $operario . '^FS
            ^FT452,457^AAN,36,20^FH\^FD' . $formulario['lote'] . '^FS
            ^FT252,526^A0N,35,36^FH\^FDAux:^FS
            ^FT369,462^A0N,35,36^FH\^FDLote:^FS
            ^FT140,521^AAN,36,20^FH\^FD' . $data_item->nombre_core . '^FS
            ^FT51,398^A0N,35,38^FH\^FDTama\A4o:^FS
            ^FT55,526^A0N,35,36^FH\^FDCore:^FS
            ^FT54,227^A0N,42,43^FH\^FD' . $nombre2 . '^FS
            ^FT54,281^A0N,42,40^FH\^FD' . $nombre1 . '^FS
            ^FO39,547^GB850,0,2^FS
            ^FO39,479^GB850,0,2^FS
            ^FO39,417^GB850,0,2^FS
            ^FO39,182^GB1146,0,2^FS
            ^FO40,353^GB850,0,2^FS
            ^FO39,288^GB1146,0,2^FS
            ^FO508,481^GB0,67,2^FS
            ^FO230,481^GB0,67,1^FS
            ^FO356,289^GB0,191,2^FS
            ^FO888,290^GB0,258,1^FS
            ^PQ' . $formulario['cantidad'] . ',0,1,Y^XZ
            ^XA^ID000.GRF^FS^XZ';
        }
    }
    echo $prueba;
    ?>
</div>